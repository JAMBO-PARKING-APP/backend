{% extends 'base/base.html' %}
{% load i18n %}

{% block title %}{% trans "Dashboard - Smart Parking System" %}{% endblock %}
{% block page_title %}{% trans "Dashboard" %}{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h5 class="fw-bold mb-1">{% trans "Welcome Back" %}, {{ user.first_name }}!</h5>
                <p class="text-muted mb-0" style="font-size: 0.9rem;">{% trans "Here's what's happening in your parking
                    lots today." %}</p>
            </div>
            <div>
                <span class="badge bg-primary-soft text-primary fs-6 px-3 py-2">
                    <i class="bi bi-calendar-event me-2"></i> {% now "F j, Y" %}
                </span>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Quick Action: Check Vehicle -->
    <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100 border-0 shadow-sm hover-lift">
            <div class="card-body p-4">
                <div class="d-flex align-items-center mb-3">
                    <div class="d-flex align-items-center justify-content-center bg-primary-soft rounded-3"
                        style="width: 48px; height: 48px;">
                        <i class="bi bi-search text-primary fs-4"></i>
                    </div>
                </div>
                <h5 class="card-title fw-bold mb-2">{% trans "Check Vehicle" %}</h5>
                <p class="card-text text-muted mb-4" style="font-size: 0.9rem;">{% trans "Verify vehicle parking status,
                    history, and outstanding violations instantly." %}</p>
                <button onclick="showCheckPlateModal()" class="btn btn-primary w-100">
                    {% trans "Check Plate" %}
                </button>
            </div>
        </div>
    </div>

    <!-- Quick Action: Issue Violation -->
    <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100 border-0 shadow-sm hover-lift">
            <div class="card-body p-4">
                <div class="d-flex align-items-center mb-3">
                    <div class="d-flex align-items-center justify-content-center bg-warning-soft rounded-3"
                        style="width: 48px; height: 48px;">
                        <i class="bi bi-exclamation-triangle text-warning fs-4"></i>
                    </div>
                </div>
                <h5 class="card-title fw-bold mb-2">{% trans "Issue Violation" %}</h5>
                <p class="card-text text-muted mb-4" style="font-size: 0.9rem;">{% trans "Report unauthorized parking or
                    policy violations directly from the dashboard." %}</p>
                <button onclick="showViolationModal()" class="btn btn-outline-warning w-100 fw-semibold">
                    {% trans "Issue Ticket" %}
                </button>
            </div>
        </div>
    </div>

    {% if user.role == 'admin' %}
    <!-- Quick Action: Analytics -->
    <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100 border-0 shadow-sm hover-lift">
            <div class="card-body p-4">
                <div class="d-flex align-items-center mb-3">
                    <div class="d-flex align-items-center justify-content-center bg-success-soft rounded-3"
                        style="width: 48px; height: 48px;">
                        <i class="bi bi-graph-up text-success fs-4"></i>
                    </div>
                </div>
                <h5 class="card-title fw-bold mb-2">{% trans "Analytics" %}</h5>
                <p class="card-text text-muted mb-4" style="font-size: 0.9rem;">{% trans "View detailed parking
                    occupancy reports, revenue analysis, and trends." %}</p>
                <a href="#" class="btn btn-outline-success w-100 fw-semibold">{% trans "View Reports" %}</a>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script>
    function showViolationModal() {
        // Using the global confirmation modal for now as a placeholder or distinct modal
        // In a real app, this would open a specific form modal
        window.showConfirmation(
            "{% trans 'Issue Violation' %}",
            "{% trans 'The violation ticketing system is currently being updated. Please try again later.' %}",
            null, // No callback
            "{% trans 'Understood' %}",
            "warning"
        );
    }

    // Check Plate functionality is now handled globally in base.html
</script>
{% endblock %}